(this.webpackJsonpnotes=this.webpackJsonpnotes||[]).push([[0],{17:function(e,t,n){e.exports=n(41)},40:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(16),c=n.n(o),u=n(6),l=n(2),i=function(e){var t=e.note,n=e.toggleImportance,a=t.important?"make not important":"make important";return r.a.createElement("li",{className:"note"},t.content,r.a.createElement("button",{onClick:n},a))},s=n(3),m=n.n(s),f=null,p=function(){return m.a.get("/api/notes").then((function(e){return e.data}))},d=function(e){var t={headers:{Authorization:f}};return m.a.post("/api/notes",e,t).then((function(e){return e.data}))},b=function(e,t){var n={headers:{Authorization:f}};return m.a.put("".concat("/api/notes","/").concat(e),t,n).then((function(e){return e.data}))},v=function(e){f="Bearer ".concat(e)},g=n(4),E=n.n(g),h=n(5),O={CANCEL_BUTTON:"Exit"},j=Object(a.forwardRef)((function(e,t){var n=e.children,o=e.buttonLabel,c=void 0===o?"show":o,u=Object(a.useState)(!1),i=Object(l.a)(u,2),s=i[0],m=i[1],f={display:s?"none":""},p={display:s?"":"none"},d=function(){return m(!s)};return Object(a.useImperativeHandle)(t,(function(){return{toggleVisibility:d}})),r.a.createElement("div",null,r.a.createElement("div",{style:f},r.a.createElement("button",{onClick:d},c)),r.a.createElement("div",{style:p},n,r.a.createElement("button",{onClick:d},O.CANCEL_BUTTON)))}));j.displayName="Togglable";var w=j,S={login:function(){var e=Object(h.a)(E.a.mark((function e(t){var n,a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.post("/api/login",t);case 2:return n=e.sent,a=n.data,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},y=function(e){var t=e.message;return null===t?null:r.a.createElement("div",{className:"error"},t)};function N(e){var t=e.handleChangeUser,n=Object(a.useState)(""),o=Object(l.a)(n,2),c=o[0],u=o[1],i=Object(a.useState)(""),s=Object(l.a)(i,2),m=s[0],f=s[1],p=Object(a.useState)(null),d=Object(l.a)(p,2),b=d[0],g=d[1],O=function(){var e=Object(h.a)(E.a.mark((function e(n){var a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,S.login({username:c,password:m});case 4:a=e.sent,window.localStorage.setItem("loggedNoteAppUser",JSON.stringify(a)),v(a.token),t(a),u(""),f(""),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),g("Wrong credentials"),setTimeout((function(){g(null)}),5e3);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(w,{buttonLabel:"Show Login"},r.a.createElement(y,{message:b}),r.a.createElement("form",{onSubmit:O},r.a.createElement("div",null,r.a.createElement("input",{type:"text",value:c,name:"Username",placeholder:"Username",onChange:function(e){return u(e.target.value)}})),r.a.createElement("div",null,r.a.createElement("input",{type:"password",value:m,name:"Password",placeholder:"Password",onChange:function(e){return f(e.target.value)}})),r.a.createElement("button",{id:"form-login-button"},"Login")))}function C(e){var t=e.addNote,n=e.handleLogout,o=Object(a.useState)(""),c=Object(l.a)(o,2),u=c[0],i=c[1],s=Object(a.useRef)();return r.a.createElement(w,{buttonLabel:"Show Create Note",ref:s},r.a.createElement("h3",null,"Create a new note"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t({content:u,important:!1}),i(""),s.current.toggleVisibility()}},r.a.createElement("input",{placeholder:"Write your note content",value:u,onChange:function(e){i(e.target.value)}}),r.a.createElement("button",{type:"submit"},"save")),r.a.createElement("div",null,r.a.createElement("button",{onClick:n},"Logout")))}var k=function(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)(!0),s=Object(l.a)(c,2),m=s[0],f=s[1],g=Object(a.useState)(null),E=Object(l.a)(g,2),h=E[0],O=E[1],j=Object(a.useState)(null),w=Object(l.a)(j,2),S=w[0],y=w[1];Object(a.useEffect)((function(){p().then((function(e){o(e)}))}),[]),Object(a.useEffect)((function(){var e=window.localStorage.getItem("loggedNoteAppUser");if(e){var t=JSON.parse(e);y(t),v(t.token)}}),[]);var k=m?n:n.filter((function(e){return e.important}));return r.a.createElement("div",null,r.a.createElement("h1",null,"Notes"),S?r.a.createElement(C,{addNote:function(e){d(e).then((function(e){o(n.concat(e))}))},handleLogout:function(){y(null),v(null),window.localStorage.removeItem("loggedNoteAppUser")}}):r.a.createElement(N,{handleChangeUser:y}),r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){return f(!m)}},"show ",m?"important":"all")),r.a.createElement("ul",null,k.map((function(e,t){return r.a.createElement(i,{key:t,note:e,toggleImportance:function(){return function(e){var t=n.find((function(t){return t.id===e})),a=Object(u.a)(Object(u.a)({},t),{},{important:!t.important});b(e,a).then((function(t){o(n.map((function(n){return n.id!==e?n:t})))})).catch((function(){O("Note '".concat(t.content,"' was already removed from server")),setTimeout((function(){O(null)}),5e3)}))}(e.id)}})}))),r.a.createElement("span",null,h))};n(40);c.a.render(r.a.createElement(k,null),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.6775fae3.chunk.js.map